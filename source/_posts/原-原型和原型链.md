---
title: '[原]原型和原型链'
categories:
- 前端
tags:
- javascript
date: 2018-12-01 09:02:01
---

## 定义

实例对象中有__proto__这个属性，叫原型，也就是一个对象。这个属性是给浏览器使用的，不是标准的属性。
构造函数有prototype这个属性，也是原型。这个属性是给程序员使用的，是标准的属性。--->它们都可以叫原型对象。

## 获取对象的原型的值

 1. 实例对象.__proto__
 2. 构造函数.prototype
 3. Object.getPrototypeof(对象名)

## 实例化对象，构造函数和原型对象三者的关系
1、构造函数可以实例化对象。实例对象是通过构造函数创建的，创建的过程叫实例化，如果传参，就是对属性进行初始化。

2、构造函数中有一个prototype这个属性，是构造函数的原型对象。

3、原型对象中有一个构造器（constructor），构造器指向的是它所在的原型对象所在的构造函数。

4、实例对象的原型对象指向的是它所在的构造函数的原型对象。实例化对象.__proto__==构造函数prototype ---->true。

5、构造函数的原型对象中的方法可以直接被实例对象直接访问。

6、原型对象中的方法可以互相调用。

7、实例对象所使用的方法或属性，首先在实例中查找，找到了直接使用，如果找不到则去实例对象的原型对（__proto__）所指向的原型对象（prototype）中找，找到了使用，找不多就报错。


## 原型的指向是可以改变的

```javascript
    function Animal(){
    }
    Animal.prototype.eat=function(){
    console.log("Animal的吃")
    }
    function Person(){
    }
    Person.prototype.play=function(){
    console.log("Person的玩")
    }
    Animal.prototype=new Person();
    var sheep=new Animal();
    sheep.eat（）
```
此时代码会报错，因为把Animal的原型指向了Person的原型，那么sheep将不能调用Animal原型里面的方法。

因为实例对象的原型（_proto_）指向的是该对象所在的构造函数的原型对象（prototype），构造函数的原型对象（prototype）如果改变了，实例对象（_proto_）的指向也会改变。
同时*Animal也继承了Person*。

那么如果又想改变指向，又想访问到方法，**解决方法：在原型改变后再添加方法**


## 原型的简单写法

```javascript
构造函数.prototype={
//需要手动修改构造器的指向
constructor:构造函数；
属性：属性值；
方法：function（）{}
}
```
**这样的写法也是改变了原型指向，让原型指向了一个对象，所以，如果先在原型上添加了一个方法，在使用此方式添加属性和方法，那么在原型上添加的方法将不会被访问到。解决方法：同上**

## 原型链定义

原型链是实例对象和原型对象通过原型（__proto__）来联系的一种关系。是通过原型继承，形成了一个链条。

## 原型链的最终指向

```
实例对象.__proto__--->构造函数.prototype
实例对象.__proto__.__proto__--->构造函数.prototype.__proto__
构造函数.prototype.__proto__--->object.prototype
object.prototype.__proto__--->null
所以object.prototype是顶层
```




